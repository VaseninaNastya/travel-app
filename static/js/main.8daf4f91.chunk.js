(this["webpackJsonptravel-app"]=this["webpackJsonptravel-app"]||[]).push([[0],{16:function(e,t,n){e.exports={header:"Header_header__yfRMG",text:"Header_text__2omjz",input:"Header_input__19dIc",select:"Header_select__26v9o"}},17:function(e,t,n){e.exports={countryInfo_container:"style_countryInfo_container__3zhV-",countryInfo_image:"style_countryInfo_image__3TQgv",countryInfo_content:"style_countryInfo_content__2QFcS"}},19:function(e,t,n){e.exports={footer:"Footer_footer__fIHO2",text:"Footer_text__36hFQ",iconGit:"Footer_iconGit__25jcv"}},25:function(e,t,n){e.exports={countryCard:"style_countryCard__1QPfE",countryCard_image:"style_countryCard_image__xUL5d"}},30:function(e,t,n){e.exports={countriesList:"style_countriesList__1Hl3g"}},31:function(e,t,n){e.exports={countryPage_container:"CountryPage_countryPage_container__3_MBv"}},32:function(e,t,n){e.exports={countryWidget_container:"style_countryWidget_container__170-D",weather_icon:"style_weather_icon__3SMWq"}},33:function(e,t,n){},38:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),i=n.n(c),o=(n(38),n(18)),s=n(2),u=n(3),l=n(7),h=n(6),g=n(5),p=n.n(g),j=n(9),d=n(14),f=n(4),b=n(16),O=n.n(b),v=n(1),m=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).languages=[{title:"English",code:"en"},{title:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",code:"ru"},{title:"Fran\xe7ais",code:"fr"}],e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.value=this.props.value}},{key:"render",value:function(){var e=this.props,t=e.switchLanguage,n=e.func,a=this.props,r=a.language,c=void 0===r?"en":r,i=(a.searchText,this.props.location);return Object(v.jsxs)("header",{className:O.a.header,children:[Object(v.jsx)(d.b,{to:"/home",children:Object(v.jsx)("p",{className:O.a.text,children:"Travel-APP"})}),"/home"===i.pathname.substring(0,5)?Object(v.jsx)("input",{className:O.a.input,onChange:n.search,type:"text",placeholder:"\u041e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0438 \u043c\u0435\u0447\u0442\u0443! \u041d\u0430\u0447\u043d\u0438 \u0441 \u043f\u043e\u0438\u0441\u043a\u0430!"}):null,Object(v.jsx)("select",{className:O.a.select,onChange:t,value:c,children:this.languages.map((function(e,t){return Object(v.jsx)("option",{value:e.code,children:e.title},t)}))})]})}}]),n}(r.a.PureComponent),y=Object(f.g)(m),x=n(25),_=n.n(x),k=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.imageURL,n=e.name,a=e.capital;return Object(v.jsxs)("div",{className:_.a.countryCard,children:[Object(v.jsx)("div",{className:_.a.countryCard_image,style:{backgroundImage:"url(".concat(t,")")}}),Object(v.jsx)("h2",{children:n}),Object(v.jsx)("h3",{children:a})]})}}]),n}(r.a.PureComponent),w=n(30),S=n.n(w),C=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.children;return Object(v.jsx)("div",{className:S.a.countriesList,children:e})}}]),n}(r.a.PureComponent),I=function(){function e(){Object(s.a)(this,e),this.API_SERVER="https://travelapp-team43.herokuapp.com"}return Object(u.a)(e,[{key:"getCountries",value:function(){var e=Object(j.a)(p.a.mark((function e(){var t,n=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"en",e.abrupt("return",fetch(this.API_SERVER+"/countries?lang="+t,{method:"GET",headers:{"Content-Type":"application/json","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36",Referer:this.API_SERVER}}).then((function(e){return e.json()})).catch((function(e){return Error(e)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCountry",value:function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"en",e.abrupt("return",fetch(this.API_SERVER+"/countries/"+t+"?lang="+n,{method:"GET",headers:{"Content-Type":"application/json","user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36",Referer:this.API_SERVER}}).then((function(e){return e.json()})).catch((function(e){return Error(e)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D=function(e,t){return e.map((function(e){return e.hidden=!0,(e.name.toLowerCase().includes(t.toLowerCase())||e.capital.toLowerCase().includes(t.toLowerCase()))&&(e.hidden=!1),e}))},P=n(19),R=n.n(P),L=n.p+"static/media/git.fb8c5597.jpg",E=n.p+"static/media/logo.bc18f908.png",A=function(){return Object(v.jsxs)("footer",{className:R.a.footer,children:[Object(v.jsx)("p",{className:R.a.text,children:"React Course \xb7 RS School 2021Q1 \xb7 Task 2"}),Object(v.jsxs)("div",{className:R.a.iconGit,children:[Object(v.jsxs)("a",{href:"https://github.com/nikolai-minkevich",target:"_blank",rel:"noreferrer",children:[Object(v.jsx)("img",{src:L,alt:"git hub"}),Object(v.jsx)("p",{children:"Nikolai"})]}),Object(v.jsxs)("a",{href:"https://github.com/VaseninaNastya",target:"_blank",rel:"noreferrer",children:[Object(v.jsx)("img",{src:L,alt:"git hub"}),Object(v.jsx)("p",{children:"Nastya"})]}),Object(v.jsxs)("a",{href:"https://github.com/AV-63-dev",target:"_blank",rel:"noreferrer",children:[Object(v.jsx)("img",{src:L,alt:"git hub"}),Object(v.jsx)("p",{children:"Anatoliy"})]})]}),Object(v.jsx)("a",{href:"https://community-z.com/events/react-rsschool-2021/",target:"_blank",rel:"noreferrer",children:Object(v.jsx)("img",{src:E,alt:"rs school"})})]})},F=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={countries:[],language:"en"},e.search=function(t){var n=e.state.countries.concat(),a=D(n,t.target.value);e.setState({countries:a})},e.loadData=Object(j.a)(p.a.mark((function e(){var t,n,a=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"en",e.next=3,this.travelAppAPI.getCountries(t);case 3:n=e.sent,this.setState({countries:n});case 5:case"end":return e.stop()}}),e,this)}))),e.travelAppAPI=new I,e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.language!==this.state.language&&this.loadData(this.state.language)}},{key:"componentDidMount",value:function(){var e=this.props.language;this.loadData(e),this.setState({language:e})}},{key:"render",value:function(){var e=this.state,t=e.countries,n=e.language,a=this.props.switchLanguage;return Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)(y,{switchLanguage:a,language:n,func:{search:this.search,installerLang:this.installerLang}}),Object(v.jsxs)(C,{children:[0===t.length?"Data is loading...":null,t.map((function(e,t){return!0!==e.hidden?Object(v.jsx)(d.b,{to:"/country/"+e.codeISO2,children:Object(v.jsx)(k,{imageURL:e.coverURL,name:e.name,capital:e.capital,codeISO2:e.codeISO2})},t):null}))]}),Object(v.jsx)(A,{})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.language!==t.language?{language:e.language}:null}}]),n}(r.a.Component),M=n(17),N=n.n(M),T=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.countryData;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:N.a.countryInfo_container,children:[Object(v.jsx)("div",{className:N.a.countryInfo_image,style:{backgroundImage:"url(".concat(e.coverURL,")")}}),Object(v.jsxs)("div",{className:N.a.countryInfo_content,children:[Object(v.jsx)("h2",{children:e.name}),Object(v.jsx)("h3",{children:e.capital}),Object(v.jsx)("div",{className:N.a.countryInfo_description,children:e.description})]})]})})}}]),n}(r.a.PureComponent),U=n(31),V=n.n(U),z=(n(45),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.countryVideoUrl;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("iframe",{src:e,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Video"})})}}]),n}(r.a.PureComponent)),G=n(32),H=n.n(G),W=function(){function e(){Object(s.a)(this,e),this.API_SERVER="https://api.openweathermap.org"}return Object(u.a)(e,[{key:"getWeather",value:function(){var e=Object(j.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(this.API_SERVER+"/data/2.5/weather?q="+t+"&lang="+n+"&appid=5df764e0a76568cd5c6ab5a26f5ef004&units=metric",{method:"GET",headers:{"user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36",Referer:this.API_SERVER}}).then((function(e){return e.json()})).catch((function(e){return Error(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),K=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={day:"",date:"",month:"",hour:"",min:"",sec:""},e.showTime=function(){var t=e.props,n=t.timezone,a=t.language,r=new Date,c=new Date(r.toLocaleString("en",{timeZone:n})),i=c.toLocaleString(a,{month:"long"}),o=c.toLocaleString(a,{weekday:"long"}),s=c.getHours(),u=c.getDate(),l=c.getMinutes(),h=c.getSeconds();e.setState({day:o,date:u,month:i,hour:s,min:l,sec:h})},e}return Object(u.a)(n,[{key:"addZero",value:function(e){return(parseInt(e,10)<10?"0":"")+e}},{key:"componentDidMount",value:function(){this.interval=setInterval(this.showTime,1e3)}},{key:"render",value:function(){var e=this.state,t=e.day,n=e.date,a=e.month,r=e.hour,c=e.min,i=e.sec;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:t}),Object(v.jsxs)("span",{children:[n," ",a]}),Object(v.jsxs)("span",{children:[r,Object(v.jsx)("span",{children:":"}),this.addZero(c),Object(v.jsx)("span",{children:":"}),this.addZero(i)]})]})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}}]),n}(r.a.PureComponent),B=n(33),Q=n.n(B),Z=function(){function e(){Object(s.a)(this,e),this.API_SERVER="https://v6.exchangerate-api.com"}return Object(u.a)(e,[{key:"getCurrency",value:function(){var e=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(this.API_SERVER+"/v6/49a5bf66bd8662e965a6a21b/latest/"+t,{method:"GET",headers:{"user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36",Referer:this.API_SERVER}}).then((function(e){return e.json()})).catch((function(e){return Error(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),X=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={currencyData:""},e.loadData=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.currency,e.next=3,this.currencyAPI.getCurrency(t);case 3:n=e.sent,this.setState({currencyData:n.conversion_rates});case 5:case"end":return e.stop()}}),e,this)}))),e.currencyAPI=new Z,e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.state.currencyData;return Object(v.jsx)("div",{className:Q.a.currency_container,children:e.EUR&&e.USD&&e.RUB?Object(v.jsxs)("span",{children:["\u20ac ",e.EUR.toFixed(2),"; $ ",e.USD.toFixed(2),"; \u20bd ",e.RUB.toFixed(2)]}):null})}}]),n}(r.a.PureComponent),q=(n(46),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={weatherData:"",lang:""},e.loadData=Object(j.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.countryCapital,n=this.state.language,e.next=4,this.weatherAPI.getWeather(t,n);case 4:a=e.sent,this.setState({weatherData:a});case 6:case"end":return e.stop()}}),e,this)}))),e.weatherAPI=new W,e}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.language!==this.state.language&&this.loadData()}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e,t,n=this.props,a=n.language,r=n.timezone,c=n.currency,i=this.state.weatherData,o="";return i&&(e="".concat(Math.floor(i.main.temp),"\xb0C"),t=i.weather[0].description,o="owf-".concat(i.weather[0].id," owf")),Object(v.jsxs)("div",{className:H.a.countryWidget_container,children:[Object(v.jsxs)("span",{children:[" ",e]}),Object(v.jsxs)("span",{children:[" ",t]}),Object(v.jsx)("i",{className:o}),Object(v.jsx)(K,{language:a,timezone:r}),Object(v.jsx)(X,{currency:c})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.language!==t.language?{language:e.language}:null}}]),n}(r.a.PureComponent)),J=n(20);var $=function(e){var t=r.a.createRef(null);return Object(v.jsx)("div",{className:"App",children:Object(v.jsx)(J.c,{children:Object(v.jsx)(J.a,{instanceRef:t,state:{center:e.capitalCoordinates,zoom:4},onLoad:function(n){return function(n){if(t&&t.current){var a=new n.ObjectManager;n.borders.load("001",{lang:e.language,quality:2}).then((function(n){var r=n.features.reduce((function(e,t){var n=t.properties.iso3166;return t.id=n,t.options={fillOpacity:.6,strokeColor:"#FFF",strokeOpacity:.5},e[n]=t,e}),{})[e.codeISO2];r.options.fillColor="#FF0000",n.features=[],n.features.push(r),a.add(n),t.current.geoObjects.add(a)}))}}(n)},modules:["borders","ObjectManager"],children:Object(v.jsx)(J.b,{geometry:e.capitalCoordinates})})})})},Y=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={countryData:"",language:"en"},e.loadData=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,a,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"en",e.next=3,this.travelAppAPI.getCountry(t,n);case 3:a=e.sent,this.setState({countryData:a});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e.travelAppAPI=new I,e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.codeISO2,t=this.props.language;this.loadData(e,t)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.match.params.codeISO2;t.language!==this.state.language&&this.loadData(n,this.state.language)}},{key:"render",value:function(){var e=this.state,t=e.countryData,n=e.language,a=t.videoURL,c=t.capital,i=t.timeZone,o=t.capitalCoordinates,s=t.codeISO2,u=t.currency,l=this.props.switchLanguage;return Object(v.jsxs)(r.a.Fragment,{children:[Object(v.jsx)(y,{switchLanguage:l,language:n}),0===t.length?"Data is loading...":null,Object(v.jsxs)("div",{className:V.a.countryPage_container,children:[t?Object(v.jsx)(T,{countryData:t}):null,c&&i&&u?Object(v.jsx)(q,{language:n,timezone:i,countryCapital:c,currency:u}):null,a?Object(v.jsx)(z,{countryVideoUrl:a}):null,o?Object(v.jsx)($,{capitalCoordinates:[o.lat,o.lon],language:n,codeISO2:s}):null]}),Object(v.jsx)(A,{})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.language!==t.language?{language:e.language}:null}}]),n}(r.a.Component),ee=Object(f.g)(Y),te="travelApp43_language",ne=["en","ru","fr"],ae=ne[0],re=function(){function e(){Object(s.a)(this,e),this.load()}return Object(u.a)(e,[{key:"load",value:function(){return this.language=localStorage.getItem(te),this.language||(this.language=ae,this.save()),this.get()}},{key:"save",value:function(){return localStorage.setItem(te,this.language),this.get()}},{key:"set",value:function(e){return ne.includes(e)?(this.language=e,this.save(),this.get()):this.get()}},{key:"get",value:function(){return this.language}}]),e}(),ce=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).switchLanguage=function(t){e.languageSwitcher.set(t.target.value),e.setState({language:e.languageSwitcher.get()})},e.languageSwitcher=new re,e.state={language:e.languageSwitcher.get()},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.history,n=this.state.language;return Object(v.jsx)(d.a,{children:Object(v.jsxs)(f.d,{children:[Object(v.jsx)(f.b,{history:t,path:"/home",render:function(t){return Object(v.jsx)(F,Object(o.a)(Object(o.a)({},t),{},{language:n,switchLanguage:e.switchLanguage}))}}),Object(v.jsx)(f.b,{history:t,path:"/country/:codeISO2",render:function(t){return Object(v.jsx)(ee,Object(o.a)(Object(o.a)({},t),{},{language:n,switchLanguage:e.switchLanguage}))}}),Object(v.jsx)(f.a,{from:"/",to:"/home"})]})})}}]),n}(r.a.PureComponent),ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(ce,{})}),document.getElementById("root")),ie()}},[[47,1,2]]]);
//# sourceMappingURL=main.8daf4f91.chunk.js.map